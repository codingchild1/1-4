<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   	
<mapper namespace="com.mulcam.run.dao.TodayDAO">

	<!-- today전체게시물 조회 -->
	<select id="selectTBoardCount" resultType="int">
 		<![CDATA[
 			select count(*) from today
 		]]>
 	</select>
	<select id="selectTBoardList" resultType="Today" parameterType="int"  >
    	<![CDATA[
			select * from today order by today_date desc limit #{startrow},6
    	]]>
	</select>
	
	<!-- today 하나의 게시물 정보 조회 -->
	<select id="selectTBoard" resultType="Today" parameterType="int">
    	<![CDATA[
			select * from today where today_articleNo=#{today_articleNo}
    	]]>
	</select>
	
	<!-- today 조회수 수정(+1) -->
	 <update id="updateReadCount" parameterType="int">
 		<![CDATA[
 			update today set today_views=today_views+1 where today_articleNo=#{today_articleNo} 
 		]]>
 	</update>
	
	<!-- today 검색게시물 조회 -->
	<select id="searchTBoardCount" resultType="int" parameterType="String">
 		<![CDATA[
 			select count(*) from today where today_title like CONCAT('%',#{search},'%') or today_contents like CONCAT('%',#{search},'%')	
 		]]>
 	</select>
	<select id="selectSerchTBoardList" resultType="Today" parameterType="Map">
    	<![CDATA[
    		select * from today where today_title like CONCAT('%',#{search},'%') or today_contents like CONCAT('%',#{search},'%')  order by today_date desc limit #{startrow},6 ;
    	]]>
	</select>

	 	
	<!-- Today게시물 생성  -->
	<insert id="insertTBoard" parameterType="Today">
		<![CDATA[
		insert into today (user_id,today_title,today_thumb,today_contents)
		values(#{user_id},#{today_title},#{today_thumb},#{today_contents});
		 ]]>
	</insert>
	
	<!-- today게시물 수정 -->
	<update id="updateTBoard" parameterType="Today">
		<![CDATA[
		update today set today_title = #{today_title},today_contents=#{today_contents},
		today_likes=#{today_likes},today_thumb=#{today_thumb} where today_articleNo = #{today_articleNo}; 
		 ]]>
	</update>
	

	
	<!-- today 삭제 -->
	<delete id="deleteTBoard" parameterType="int">
		<![CDATA[		
		delete from today where today_articleNO=#{today_articleNO}
		 ]]>
	</delete>
	
	<!--좋아요 +1, -1  -->
	<update id="updateLikePlus"  parameterType="int">
		<![CDATA[
			update route set route_likes=route_likes+1 where route_articleNo=#{articleNo }
		]]>
	</update>
	<update id="updateLikeMinus"  parameterType="int">
		<![CDATA[
			update route set route_likes=route_likes-1 where route_articleNo=#{articleNo }
		]]>
	</update>
	
	
	
<!-- 	today 신고 
	<insert id="insertTWarn" parameterType="today">
		<![CDATA[
		
		
		 ]]>
	</insert> -->
</mapper>
