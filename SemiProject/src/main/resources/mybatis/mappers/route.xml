<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
							"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mulcam.run.dao.RouteDAO">	
	<select id="selectRouteCount" resultType="int">
		<![CDATA[
			select count(*) from route
		]]>
	</select>
	
	<select id="queryRoute" parameterType="int" resultType="route">
		<![CDATA[
			select * from route where route_articleNo=#{articleNo} limit 1
		]]>
	</select>
		
	<insert id="insertRoute" parameterType="route">
		insert into route (user_id, route_title, route_content, route_center, route_area, route_mapinfo, route_distance)
		values (#{user_id}, #{route_title}, #{route_content}, #{route_center}, #{route_area}, #{route_mapinfo}, #{route_distance})
	</insert>
	
	<select id="selectRouteList" resultType="route" parameterType="int">
		<![CDATA[
			select * from (select @rownum:=@rownum+1 rnum, tot.* 
				from (select *from route order by route_date DESC) tot, (select @rownum:=0) temp) sub
			where rnum between #{startrow} and #{startrow}+8
		]]>
	</select>
	

</mapper>
<!-- 
create table route(
	route_articleNo int(11) auto_increment not null,
    user_id varchar(100) not null,
    route_title varchar(255) not null,
    route_date datetime default current_timestamp,
    route_views int(255) default '0',
    route_likes int(255) default '0',
    route_content longtext,
    route_center varchar(500) not null,
    route_area varchar(500) not null,
    route_mapinfo varchar(1000) not null,
    route_distance decimal(10,2),
    warning boolean default false,
    primary key (route_articleNo)
);
 -->